<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Калькулятор бартера STALCRAFT: расчёт обменных монет и ресурсов | StalMath</title>
  <meta name="description" content="StalMath — калькулятор и вики по расчётам в STALCRAFT: бартерные ресурсы, обменные монеты, заточка и другое.">
  <meta name="keywords" content="STALCRAFT, Сталкрафт, калькулятор, бартер, обменные монеты, ресурсы, StalMath, крафт, расчет, гайд">
  <meta name="theme-color" content="#1a1a1a" />
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Russo+One&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <link rel="stylesheet" href="styles.css?v=3" />
</head>
<body>
  <a class="skip-link" href="#calculatorForm">К содержимому</a>

  <!-- Шапка 1-в-1 как на главной -->
  <header class="site-header">
    <nav class="header-links start">
      <a href="#" data-modal-target="#about-modal">О сайте</a>
      <a href="#" data-modal-target="#contacts-modal">Связь</a>
    </nav>

    <div class="brand">
      <a href="index.html" class="logo" aria-label="StalMath — на главную">StalMath</a>
      <span class="badge">community project</span>
    </div>

    <nav class="header-links end">
      <div class="dropdown" id="calcDropdown">
        <button class="nav-btn dropdown-toggle" id="calcMenuBtn" aria-expanded="false" aria-haspopup="true" aria-controls="calcMenu">
          <i class="fa-solid fa-calculator"></i> Калькуляторы <i class="fa-solid fa-angle-down chevron" aria-hidden="true"></i>
        </button>
        <div class="dropdown-menu" id="calcMenu" role="menu">
          <a class="dropdown-item" role="menuitem" href="barter.html">
            <i class="fa-solid fa-coins"></i> Калькулятор бартера
          </a>
          <a class="dropdown-item" role="menuitem" href="sharpening.html">
            <i class="fa-solid fa-screwdriver-wrench"></i> Калькулятор заточки
          </a>
          <div class="dropdown-note">Скоро: экономические расчёты, DPS‑таблица</div>
        </div>
      </div>

      <a href="guides.html"><i class="fa-solid fa-book-open"></i> Руководства</a>
    </nav>

    <div class="header-actions">
      <button type="button" id="togglePresetsBtn" class="ghost-btn" title="Открыть список пресетов на мобильных">
        <i class="fa-solid fa-list"></i>
      </button>
      <button type="button" id="themeToggleBtn" class="ghost-btn" title="Переключить тему">
        <i class="fa-solid fa-moon"></i>
      </button>
    </div>
  </header>

  <!-- Модалки -->
  <div id="about-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="about-title">
    <div class="modal-content">
      <button class="close-button" aria-label="Закрыть">&times;</button>
      <h2 id="about-title">О StalMath</h2>
        <p>StalMath — набор бесплатных инструментов и гайдов по STALCRAFT: X. Мы фокусируемся на точных расчётах, удобстве и наглядности.</p>
        <ul>
        <li>Калькулятор бартера с пресетами, скидками и шэрингом</li>
        <li>Калькулятор заточки</li>
        <li>Руководства и таблицы</li>
        </ul>
        <p>Обратная связь и помощь приветствуются — смотрите раздел «Связь».</p>
    </div>
  </div>

  <div id="contacts-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="contacts-title">
    <div class="modal-content">
        <button class="close-button" aria-label="Закрыть">&times;</button>
        <h2 id="contacts-title">Как связаться</h2>

        <ul class="contact-list">
        <li class="contact-item">
            <i class="ci vk fa-brands fa-vk" aria-hidden="true"></i>
            <div class="contact-text">
            <div class="label">ВКонтакте</div>
            <a class="contact-link brand-vk" href="https://vk.com/hxteevery1" target="_blank" rel="noreferrer noopener" title="Открыть профиль VK">
                <span>@everal41</span>
                <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i>
            </a>
            </div>
        </li>

        <li class="contact-item">
            <i class="ci discord fa-brands fa-discord" aria-hidden="true"></i>
            <div class="contact-text">
            <div class="label">Discord</div>
            <a class="contact-link brand-discord" href="https://discord.gg/9hkdXxRSnr" target="_blank" rel="noreferrer noopener" title="Перейти на сервер Discord">
                <span>Наш сервер</span>
                <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i>
            </a>
            </div>
        </li>

        <li class="contact-item">
            <i class="ci game fa-solid fa-gamepad" aria-hidden="true"></i>
            <div class="contact-text">
            <div class="label">Ник в игре</div>
            <div class="nick-row">
                <span class="nick online-nick" id="gameNick">X_Solitude</span>
                <button type="button" class="copy-btn" id="copyNickBtn" title="Скопировать ник">
                <i class="fa-regular fa-copy" aria-hidden="true"></i>
                <span>Копировать</span>
                </button>
            </div>
            </div>
        </li>
        </ul>
    </div>
   </div>

    <main>
        <div class="container">
            <aside class="left-block" aria-label="Список пресетов">
                <div class="presets-topbar">
                    <div class="search-wrapper">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <input id="presetSearch" type="search" placeholder="Поиск по пресетам..." autocomplete="off" />
                        <button type="button" id="clearSearchBtn" class="ghost-btn" title="Очистить поиск">
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                    </div>
                    <div class="presets-tools">
                        <button type="button" id="expandAllBtn" class="ghost-btn" title="Развернуть всё">
                            <i class="fa-solid fa-angles-down"></i>
                        </button>
                        <button type="button" id="collapseAllBtn" class="ghost-btn" title="Свернуть всё">
                            <i class="fa-solid fa-angles-up"></i>
                        </button>
                    </div>
                </div>

                <div class="presets-container">
                    <details class="preset-category">
                        <summary><span>Броня</span></summary>
                        <ul id="armor-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Оружие</span></summary>
                        <ul id="weapons-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Рюкзаки и Контейнеры</span></summary>
                        <ul id="containers-presets" class="preset-list"></ul>
                        <ul id="backpacks-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Надульники и глушители</span></summary>
                        <ul id="attachments-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Магазины</span></summary>
                        <ul id="mags-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Цевья и крепления</span></summary>
                        <ul id="forends-presets" class="preset-list"></ul>
                        <ul id="brackets-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Прочие обвесы</span></summary>
                        <ul id="others-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Устройства</span></summary>
                        <ul id="devices-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Прицелы</span></summary>
                        <ul id="sights-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Скины и Краски</span></summary>
                        <ul id="skins-presets" class="preset-list"></ul>
                    </details>

                    <details class="preset-category">
                        <summary><span>Прочее</span></summary>
                        <ul id="skans-presets" class="preset-list"></ul>
                    </details>
                </div>
            </aside>

            <div class="right-block">
                <form id="calculatorForm" novalidate>
                    <fieldset>
                        <legend>Болота</legend>
                        <div class="resource rank-noob">
                            <img src="images/barter/bolotny_kamen.png" alt="Болотный камень" loading="lazy">
                            <label for="bolotny_kamen">Болотный камень</label>
                            <input type="number" id="bolotny_kamen" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-noob">
                            <img src="images/barter/green_plesen.png" alt="Зеленая плесень" loading="lazy">
                            <label for="green_plesen">Зеленая плесень</label>
                            <input type="number" id="green_plesen" min="0" value="0" inputmode="numeric">
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Южная Зона</legend>
                        <div class="resource rank-new">
                            <img src="images/barter/koren_vonyuchka.png" alt="Корень-вонючка" loading="lazy">
                            <label for="koren_vonyuchka">Корень-вонючка</label>
                            <input type="number" id="koren_vonyuchka" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-new">
                            <img src="images/barter/srachnik.png" alt="Срачник" loading="lazy">
                            <label for="srachnik">Срачник</label>
                            <input type="number" id="srachnik" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-new">
                            <img src="images/barter/mednaya_provoloka.png" alt="Остатки медной проволоки" loading="lazy">
                            <label for="mednaya_provoloka">Остатки медной проволоки</label>
                            <input type="number" id="mednaya_provoloka" min="0" value="0" inputmode="numeric">
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Окрестности Завода</legend>
                        <div class="resource rank-mid">
                            <img src="images/barter/romashka.png" alt="Росток чернобыльской ромашки" loading="lazy">
                            <label for="romashka">Росток чернобыльской ромашки</label>
                            <input type="number" id="romashka" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mid">
                            <img src="images/barter/radioperedatchik.png" alt="Остатки радиопередатчика" loading="lazy">
                            <label for="radioperedatchik">Остатки радиопередатчика</label>
                            <input type="number" id="radioperedatchik" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mid">
                            <img src="images/barter/rassolnik.png" alt="Рассольник" loading="lazy">
                            <label for="rassолnik">Рассольник</label>
                            <input type="number" id="rassolnik" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mid">
                            <img src="images/barter/alpha_fragment.png" alt="Фрагмент данных Альфа" loading="lazy">
                            <label for="alfa_fragment">Фрагмент данных Альфа</label>
                            <input type="number" id="alfa_fragment" min="0" value="0" inputmode="numeric">
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Полесское/ПД</legend>
                        <div class="resource rank-high">
                            <img src="images/barter/beta_fragment.png" alt="Фрагмент данных 'Бета'" loading="lazy">
                            <label for="beta_fragment">Фрагмент данных "Бета"</label>
                            <input type="number" id="beta_fragment" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-high">
                            <img src="images/barter/durman_kamen.png" alt="Дурман-камень" loading="lazy">
                            <label for="durman_kamen">Дурман-камень</label>
                            <input type="number" id="durman_kamen" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-high">
                            <img src="images/barter/severny_moh.png" alt="Северный мох" loading="lazy">
                            <label for="severny_moh">Северный мох</label>
                            <input type="number" id="severny_moh" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-high">
                            <img src="images/barter/ostatki_akkumulyatora.png" alt="Остатки аккумулятора" loading="lazy">
                            <label for="ostatki_akkumulyatora">Остатки аккумулятора</label>
                            <input type="number" id="ostatki_akkumulyatora" min="0" value="0" inputmode="numeric">
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Север</legend>
                        <div class="resource rank-mast">
                            <img src="images/barter/gamma_fragment.png" alt="Фрагмент данных 'Гамма'" loading="lazy">
                            <label for="gamma_fragment">Фрагмент данных "Гамма"</label>
                            <input type="number" id="gamma_fragment" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mast">
                            <img src="images/barter/veshestvo_07270.png" alt="Вещество 07270" loading="lazy">
                            <label for="veshestvo_07270">Вещество 07270</label>
                            <input type="number" id="veshestvo_07270" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mast">
                            <img src="images/barter/ryzhiy_paporotnik.png" alt="Рыжий папоротник" loading="lazy">
                            <label for="ryzhiy_paporotnik">Рыжий папоротник</label>
                            <input type="number" id="ryzhiy_paporotnik" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mast">
                            <img src="images/barter/psi_mayachok.png" alt="Остатки пси-маячка" loading="lazy">
                            <label for="psi_mayachok">Остатки пси-маячка</label>
                            <input type="number" id="psi_mayachok" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mast">
                            <img src="images/barter/kvantovaya_batareya.png" alt="Квантовая батарея" loading="lazy">
                            <label for="kvantovaya_batareya">Квантовая батарея</label>
                            <input type="number" id="kvantovaya_batareya" min="0" value="0" inputmode="numeric">
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Любеч-3</legend>
                        <div class="resource rank-mast">
                            <img src="images/barter/limb.png" alt="Лимб" loading="lazy">
                            <label for="limb">Лимб</label>
                            <input type="number" id="limb" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mast">
                            <img src="images/barter/gorkolistnik.png" alt="Горьколистник" loading="lazy">
                            <label for="gorkolistnik">Горьколистник</label>
                            <input type="number" id="gorkolistnik" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mast">
                            <img src="images/barter/lambda_fragment.png" alt="Фрагмент данных 'Лямбда'" loading="lazy">
                            <label for="lambda_fragment">Фрагмент данных "Лямбда"</label>
                            <input type="number" id="lambda_fragment" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mast">
                            <img src="images/barter/limboplazma.png" alt="Лимбоплазма" loading="lazy">
                            <label for="limboplazma">Лимбоплазма</label>
                            <input type="number" id="limboplazma" min="0" value="0" inputmode="numeric">
                        </div>
                        <div class="resource rank-mast">
                            <img src="images/barter/anomalnaya_batareya.png" alt="Аномальная батарея" loading="lazy">
                            <label for="anomalnaya_batareya">Аномальная батарея</label>
                            <input type="number" id="anomalnaya_batareya" min="0" value="0" inputmode="numeric">
                        </div>
                    </fieldset>

                    <div class="result-block">
                        <div class="coupon-header">
                            <div class="coupon-title">
                                <i class="fa-solid fa-tag"></i>
                                <span>Выбранные пресеты и скидки</span>
                            </div>
                            <div class="coupon-tools">
                                <label class="sr-only" for="discountAllSelect">Скидка для всех</label>
                                <select id="discountAllSelect" title="Применить скидку ко всем выбранным">
                                    <option value="">Скидка для всех…</option>
                                    <option value="1">Без скидки</option>
                                    <option value="0.9">Скидка 10%</option>
                                    <option value="0.85">Скидка 15%</option>
                                    <option value="0.8">Скидка 20%</option>
                                    <option value="0.75">Скидка 25%</option>
                                    <option value="0.7">Скидка 30%</option>
                                    <option value="0.5">Скидка 50%</option>
                                    <option value="0.25">Скидка 75%</option>
                                    <option value="0.01">Скидка 99%</option>
                                </select>
                                <button type="button" id="clearSelectedBtn" class="ghost-btn" title="Снять все выбранные пресеты">
                                    <i class="fa-solid fa-broom"></i>
                                </button>
                            </div>
                        </div>

                        <div id="couponApplyBlock" class="coupon-apply-container"></div>

                        <div class="total-cost-block">
                            <p id="totalCoinsDisplay" aria-live="polite">Выберите предметы для расчета</p>
                            <div class="result-actions">
                                <button type="button" id="shareBtn" class="ghost-btn" title="Поделиться расчётом">
                                    <i class="fa-solid fa-share-nodes"></i>
                                </button>
                                <button type="button" id="resetBtn" title="Сбросить всё">
                                    <i class="fas fa-undo"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <div id="toast" role="status" aria-live="polite" class="toast" hidden></div>

    <script src="data.js"></script>
    <script src="calculator.js?v=2"></script>
    <script src="global.js?v=2"></script>
    <script src="home.js"></script>
</body>
</html>